<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ssafy.finale.dao.TeamDAO">

	<!-- 특정 유저의 팀 전체 조회 -->
	<select id="selectTeamByUser" resultType="Map">
		select *
		from users a
		left join team_lists b
		on a.teamlist_id = b.teamlist_id
		left join teams
		c
		on b.teamlist_id = c.teamlist_id
		where a.teamlist_id = ${user_id};
	</select>

	<!-- 팀 상세 조회 : 그 팀의 회원 리스트 보여줌 -->
	<select id="selectTeamBId" resultType="Map">
		select *
		from users a
		left
		join team_lists b
		on a.teamlist_id = b.teamlist_id
		left join teams c
		on
		b.teamlist_id = c.teamlist_id
		where c.team_name = "${team_name}";
	</select>

	<!-- 특정 유저의 팀 리스트에 특정 팀 추가 -->
	<insert id="insertUserToTeam" parameterType="int">
		insert into teams(
		teamlist_id, team_name, team_image)
		values ((select teamlist_id
		from users
		where user_id=${user_id}), "${team.team_name}",
		"${team.team_image}"
		);
	</insert>

	<!-- 팀 자체를 추가 -->
	<!-- <insert id="insertTeam" parameterType="team">
		insert into teams(
		team_name, team_image
		) values (
		#{team_name}, #{team_image}
		)
	</insert> -->

	<!-- 팀 정보 수정 -->
	<update id="updateTeam" parameterType="team">
		update board
		set
		board_title = #{board_title},
		board_content = #{board_content}
		where
		board_id = #{board_id}
	</update>

	<!-- 팀 삭제 -->
	<delete id="deleteTeam" parameterType="int">
		delete
		from teams
		where
		team_id = #{team_id}
	</delete>


</mapper>

